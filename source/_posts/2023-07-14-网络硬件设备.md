---
title: 网络硬件设备
date: 2023-07-14 11:27:13
updated: 2023-07-14 11:27:13
categories: 网络
tags: 硬件设备
description: 中继器（repeater）、集线器（Hub）、交换机（switch）、路由器（router）、网桥（brige）、网关（gateway）
---

> Hub & Switch are used to create networks, Router is used to connect networks


### 中继器（repeater) 物理层
物理层设备，信号再生、放大，延长通信距离，价格便宜。


### 集线器 - 多口中继器 （Hub）物理层
中继器就是普通集线器的前身，集线器实际就是一种多端口的中继器，集线器一般有4、8、16、24、32等数量的 RJ45 接口。通过这些接口，集线器便能为相应数量的电脑完成"中继"功能，由于它在网络中处于一种"中心"位置，因此集线器也叫做 Hub。

- 广播
- 冲突域大
- 半双工
- 共享带宽 同一时刻只有两个端口传输数据
- 侦听

#### RJ45 (Registered jack)
常见网线的水晶头接口


### 交换机 （switch）数据链路层

基于集线器的缺点，诞生了交换机，它能识别连接于其上设备的 mac 地址，并能把信号单独的转发给对于的设备。能在一定程度上有效的隔离冲突域和抑制广播风暴。
- 独享带宽
- 全双工

>HUB only detects that a device is physically connected to it, SWITCH can detect specific devices that are connected to it, keeps a record of the MAC addresses of those devices.

当信号到达集线器后，会被广播到整个网络中。以太网的基本架构就是将包发到所有的设备，然后由设备根据接收方 MAC 地址来判断应该接收哪些包，而集线器就是这一架构的忠实体现，它就是负责按照以太网的基本架构将信号广播出去。

#### 交换机的三种特殊操作
1. 交换机查询地址表之后发现记录中的目标端口和这个包的源端口是同一个端口，则丢弃包，否则可能会造成重复。
![hub连switch](switcher.png)
问题：集线器有 MAC 地址吗？集线器能连交换机吗？
2. 交换机地址表中找不到包的目的 MAC 地址，这可能是因为具有该地址的设备还没有向交换机发送过包，或者这个设备一段时间没有工作导致地址被从地址表中删除了。这种情况下，交换机无法判断应该把包转发到哪个端口，只能将包转发到除了源端口之外的所有端口上，无论该设备连接在哪个端口上都能收到这个包。
3. 如果接收方 MAC 地址是一个广播地址，那么交换机会将包发送到除源端口之外的所有端口。

### 路由器 （router）网络层

**家用路由器已集成了集线器、交换机的功能**

routing table 

家用路由器主要实现用户接入广域网的家庭网关功能，企业级路由器主要实现高性能的三层网络数据包转发以及动态路由协议的学习。通俗来讲，家用路由器基本上只有接入上网的网关功能，而企业级路由器不仅可以充当接入上网的网关功能，还有其他更加强大的功能。

通过集线器和交换机，可以将很多台设备组成一个比较大的局域网，但是当设备的数量达到一定数目时，问题也就出现了，对于使用集线器构成的局域网而言，由于采用广播工作方式，当网络规模较大时，信息在传输过程中出现碰撞、堵塞的情况越来越严重，即使是交换机这种情况也同样存在，其次这种局域网也不安全、不利于管理。

为了解决这些问题，把这些较大的网络划分为一个个小的子网、网段，或者直接将它们划分为多个 VLAN （虚拟局域网），在一个 VLAN 内，一台设备发出的消息只能在相同 VALN 下传播，采用 VALN 划分网络后，可以有效的抑制广播风暴，增加网络安全性，使得管理控制集中。

不同的 VLAN 通过 router 来通信，此外不同的 VLAN 的结构、使用的协议、速度不同，router 也能处理这些。路由器连接多个网络。

router本质上是一个网络的网关(The router is the gateway of a network)。

路由器比集线器和交换机复杂，路由器相当于一台计算机，有 CPU、ROM、Flash、DRAM等，也有对于的软件操作系统。

### 网桥（brige）
简单来说，网桥就是一个硬件网络协议翻译器，假如 windows 和 mac os 使用的网络协议不同，就像两个外国人使用不同的语言，此时需要一个翻译，网桥就是翻译。

在 386、486时代网桥可能是一台安装了协议转化程序的电脑，如今交换机也包含这个功能，如今的操作系统为了互相交流，支持更多的协议，操作系统自己就可以是网桥。

现在网桥这个概念已经淡出了。更多是所谓的桥接、转发、协议二次封装。网桥也可以说相当一个端口少的二层交换机，再者网桥主要由软件实现，交换机主要由硬件实现！

### 网关（gateway）
按照不同的分类标准网关也有很多种，这里的网关是 TCP/IP 协议下的网关。

网关实质上是一个网络通向其他网络的 IP 地址，比如网络A和网络B的网段不同，在没有路由器的情况下，两个网络之间是不能进行 TCP/IP 通信的，即使两个网络连接在同一台交换机（或集线器）上，要实现通信必须通过网关。

如果网络A中的主机发现数据包的目的主机不在本地网络中，就把数据发送给自己的网关，再由网关发送给网络B的网关，网络B的网关再转发给网络B中的主机。

所以只有设置好网关的 IP 地址，TCP/IP 协议才能实现不同网络之间的相互通信，那么这个 IP 是哪台机器的 IP 地址呢，网关的 IP 地址是具有路由功能的设备的 IP 地址，具有路由功能的设备有路由器、启用了路由协议的服务器（实际上相当于一台路由器）、代理服务器。

#### 网关的分类
- 协议网关 在使用不同的协议的网络区域间做协议转换
- 应用网关 使用不同数据格式间翻译数据的系统
- 安全网关 各种技术的融合，具有重要且独特的保护作用


### 总结
1. Hub 工作在1层，只起信号再生功能（多端口中继器）
2. 网桥、交换机工作在2层，靠物理地址工作，解决 CSMA/CD 的冲突问题，网桥基于软件，现在用的不多，只有概念，交换机是基于硬件的网桥 （ASIC）
3. 路由器工作在3层，靠逻辑地址工作，提供逻辑寻址，解决广播等问题
4. 网关是3层及以上的概念，是个笼统的概念，比如路由器、防火墙都可以叫网关，它是某个网络的出口的意思

网关是一个大概念，只要连接两个不同网络的设备都可以叫网关，而路由器一般特指能够实现路由和转发的特定类产品，路由器显然能实现网关的功能，默认网关事实上不是一个产品而是一个网络层的概念，PC 本身不具备路由寻址能力，所以 PC 要把所有的 IP 包发送到一个默认的中转地址上面进行转发，这个默认的地址就是默认网关，这个网关可以在路由器上、可以在3层交换机上，可以在防火墙上，可以在服务器上所以和物理设备无关。

netstat -rn


### 双绞线
内部有八根信号线，两两双绞线，为什么要双绞呢？

为了解决信号干扰:

1. 通过两根信号线的缠绕（电信号方向相反，抵消干扰）抵消外源性噪声;
2. 通过改变节距抑制内源性噪声 串扰

通过将信号线缠绕在一起的方式，噪声得到了抑制，从结果来看提升了网线的性能，除此之外还有其他的一些工艺也能帮助提升性能，例如在信号线之间加入**隔板**保持距离，以及在外部包裹可以阻挡电磁波的**屏蔽网**等，有了这些工艺的帮助，可以买到性能指标不同的各类网线，网线的性能是以类来区分的。 

### 网线分类
#### 五类 (CAT-5)
用于 10 Mbit/s (10BASE-T) 和 100 Mbit/s (100BASE-TX) 以太网，可以最高 125 MHz 的频率在最长 100 米的距离内传输信号
#### 超五类 (CAT-5e)
用于千兆 (1000BASE-T) 以太网，对五类网线进行了改良，改善了串扰，也向下兼容 10BASE-T 和 100BASE-TX
#### 六类 (CAT-6)
支持最高 250 MHz 的信号传输，用于 1000BASE-TX 规格的千 兆以太网和 10GBASE-T 规格的万兆以太网，同时向下兼容 10BASE-T、100BASE-TX 和 1000BASE-T 
#### 超六类 (CAT-6A)
对六类网线进行了改良，改善了外部串扰，兼容 10GBASE-T、 1000BASE-TX、1000BASE-T、100BASE-TX 和 10BASE-T
#### 七类 (CAT-7)
支 持 最 高 600 MHz 的 高 速 信 号 传 输， 兼 容 10GBASE-T、1000BASE-TX、1000BASE-T、100BASE-TX 和 10BASE-T
