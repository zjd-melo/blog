<!DOCTYPE html>
<html lang="zh_CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="true">

<link rel="stylesheet" href="/blog/css/main.css">


<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zjd-melo.github.io","root":"/blog/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="计算机网络传输层 TCP 协议">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络传输层01">
<meta property="og:url" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/index.html">
<meta property="og:site_name" content="Dying Memory">
<meta property="og:description" content="计算机网络传输层 TCP 协议">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/rdt.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/FSM.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt1.0-FSM.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt2.0-FSM.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt2.1-FSM-sender.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt2.1-FSM-recv.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt3.0-FSM-sender.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/%E5%8F%91%E9%80%81%E6%96%B9seq.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/%E5%8F%91%E9%80%81%E6%96%B9seq.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/%E5%8F%91%E9%80%81%E6%96%B9seq2.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/demo.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/stop-wait.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/pipeline.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/window.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN-FSM.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN-FSM-recv.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN-seq.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/sr-window.png">
<meta property="og:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/SR.png">
<meta property="article:published_time" content="2024-03-30T03:13:00.000Z">
<meta property="article:modified_time" content="2024-03-30T03:13:00.000Z">
<meta property="article:author" content="朱佳东">
<meta property="article:tag" content="网络">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/rdt.png">

<link rel="canonical" href="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh_CN'
  };
</script>

  <title>计算机网络传输层01 | Dying Memory</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>


<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Dying Memory</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Keep moving</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/blog/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/blog/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">58</span></a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/blog/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>Sitemap</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/zjd-melo" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh_CN">
    <link itemprop="mainEntityOfPage" href="https://zjd-melo.github.io/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.png">
      <meta itemprop="name" content="朱佳东">
      <meta itemprop="description" content="melon">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dying Memory">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          计算机网络传输层01
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2024-03-30 11:13:00" itemprop="dateCreated datePublished" datetime="2024-03-30T11:13:00+08:00">2024-03-30</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>3.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>3 mins.</span>
            </span>
            <div class="post-description">计算机网络传输层 TCP 协议</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="传输层服务和协议"><a href="#传输层服务和协议" class="headerlink" title="传输层服务和协议"></a>传输层服务和协议</h2><ul>
<li>传输层协议为运行在不同 Host 上的进程提供了一种逻辑通信机制</li>
<li>端系统运行传输层协议<ul>
<li>发送方：将应用递交的消息分成一个或多个 segment 段，并向下传给网络层</li>
<li>接收方：将接收到的 segment 段组装成消息，并向上交给应用层</li>
</ul>
</li>
</ul>
<h2 id="传输层-vs-网络层"><a href="#传输层-vs-网络层" class="headerlink" title="传输层 vs 网络层"></a>传输层 vs 网络层</h2><ul>
<li>网络层提供主机之间的逻辑通信机制</li>
<li>传输层提供应用进程之间的逻辑通信机制<ul>
<li>位于网络层之上</li>
<li>依赖于网络层服务</li>
<li>对网络层服务进行（可能的）增强</li>
</ul>
</li>
</ul>
<h2 id="Internet提供的传输层协议"><a href="#Internet提供的传输层协议" class="headerlink" title="Internet提供的传输层协议"></a>Internet提供的传输层协议</h2><h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><p>可靠、按序的交付服务</p>
<ul>
<li>拥塞控制</li>
<li>流量控制</li>
<li>连接建立（链路可达）</li>
</ul>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><p>不可靠的交付服务，基于尽力而为（Best-effort）的网络层，没有做可靠性方面的扩展。</p>
<p>两种服务均不提供<strong>延迟</strong>，<strong>带宽</strong>的保证。</p>
<h2 id="多路复用和多路分用"><a href="#多路复用和多路分用" class="headerlink" title="多路复用和多路分用"></a>多路复用和多路分用</h2><p>发送方的多路复用和接收方的多路分用（分解）。</p>
<h3 id="发送方多路复用"><a href="#发送方多路复用" class="headerlink" title="发送方多路复用"></a>发送方多路复用</h3><p>从多个 socket 接收数据，为每块数据封装上头部信息，生成 segment，交给网络层。</p>
<h3 id="接收方多路分用"><a href="#接收方多路分用" class="headerlink" title="接收方多路分用"></a>接收方多路分用</h3><p>传输层依据头部信息将收到的 segment 交给正确的 socket，即不同的进程。</p>
<h3 id="分用的工作原理"><a href="#分用的工作原理" class="headerlink" title="分用的工作原理"></a>分用的工作原理</h3><p>主机接收到 IP 数据报（datagrame）</p>
<ul>
<li>每个数据报携带源 IP 地址、目的 IP 地址</li>
<li>每个数据报携带一个传输层的段（segment）</li>
<li>每个段携带源端口号和目的端口号</li>
</ul>
<p>主机收到 segment 后，传输层协议提取 IP 地址和端口信息，将 segment 导向相应的 socket，实现分用。TCP 做更多的处理，网络层不关心端口号。</p>
<h4 id="无连接的分用-UDP"><a href="#无连接的分用-UDP" class="headerlink" title="无连接的分用 UDP"></a>无连接的分用 UDP</h4><ol>
<li>主机 A 利用端口号99111，99222创建 socket</li>
<li>UDP 的 socket 用二元组标识（目的 IP 地址，目的端口号）</li>
<li>主机 B 收到 UDP 段后，检查段中的目的端口号，将 UDP 段导向绑定在该端口号的 scoket</li>
<li>来自不同源 IP 地址或源端口号的 IP 数据报（只要目的端口号一样）被导向同一个 scoket</li>
</ol>
<h4 id="面向连接的分用-TCP"><a href="#面向连接的分用-TCP" class="headerlink" title="面向连接的分用 TCP"></a>面向连接的分用 TCP</h4><ol>
<li>TCP socket 用四元祖标识（源 IP 地址，源端口号，目的 IP 地址，目的端口号）</li>
<li>接收端利用所有的四个值将 segment 导向合适的 scoket</li>
<li>服务器可能同时支持多个 TCP socket</li>
<li>WEB 服务器为每个客户端开不同的 scoket</li>
</ol>
<h2 id="UDP-1"><a href="#UDP-1" class="headerlink" title="UDP"></a>UDP</h2><h3 id="基于-IP-协议，做了简单的扩展"><a href="#基于-IP-协议，做了简单的扩展" class="headerlink" title="基于 IP 协议，做了简单的扩展"></a>基于 IP 协议，做了简单的扩展</h3><ul>
<li>支持 复用/分用</li>
<li>简单的错误校验<br>将网络层的服务暴露给应用层，提供 Best effort服务，UDP 段可能丢失、非按序到达。</li>
</ul>
<h3 id="无连接"><a href="#无连接" class="headerlink" title="无连接"></a>无连接</h3><ul>
<li>UDP 发送方和接收方之间不需要握手</li>
<li>每个 UDP 段的处理独立于其他段</li>
</ul>
<h3 id="UDP-存在的价值"><a href="#UDP-存在的价值" class="headerlink" title="UDP 存在的价值"></a>UDP 存在的价值</h3><ul>
<li>无需建立连接（减少延迟）</li>
<li>实现简单：无需维护连接状态</li>
<li>头部开销小 （8 Bytes）</li>
<li>没有拥塞控制：应用可更好的控制发送时间和速率，TCP 内部有拥塞控制，不完全听命于上层</li>
</ul>
<p><strong>问题：为什么有了链路层的错误校验还需要传输层的错误校验呢？</strong></p>
<p>传输层提供的是端到端的服务，不能保证经过的所有链路都具有错误检测功能，即便所有链路都有错误检测功能，但在路由器进行存储转发的时候也有可能出错。</p>
<h3 id="UDP用途"><a href="#UDP用途" class="headerlink" title="UDP用途"></a>UDP用途</h3><ul>
<li>用于流媒体应用<ul>
<li>容忍丢失</li>
<li>速率敏感</li>
</ul>
</li>
<li>DNS、SNMP</li>
<li>在应用层上实现可靠数据传输<ul>
<li>在应用层增加可靠机制</li>
<li>应用特定的错误恢复机制</li>
</ul>
</li>
</ul>
<h3 id="UDP-校验和-checksum"><a href="#UDP-校验和-checksum" class="headerlink" title="UDP 校验和 checksum"></a>UDP 校验和 checksum</h3><p>检测 UDP 段在传输中是否发生错误（如位翻转）。</p>
<p>接收方计算所收到段的校验和并与报文中校验和字段对比</p>
<ul>
<li>不一致：检测出错误</li>
<li>一致：没有检测出错误（可能有错误）</li>
</ul>
<p>关于错误校验的能力问题，有些错误可以校验出来有些不行。</p>
<h3 id="可靠数据传输原理"><a href="#可靠数据传输原理" class="headerlink" title="可靠数据传输原理"></a>可靠数据传输原理</h3><p>什么是可靠？不错、不丢、不乱。</p>
<p>可靠数据传输协议是网络的 Top 10 问题，信道的不可靠特性决定了可靠数据传输协议（rdt）的复杂性，可靠数据传输对应用层、传输层、链路层都很重要。</p>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/rdt.png" alt="rdt"></p>
<h3 id="可靠数据传输协议基本结构：接口"><a href="#可靠数据传输协议基本结构：接口" class="headerlink" title="可靠数据传输协议基本结构：接口"></a>可靠数据传输协议基本结构：接口</h3><ul>
<li><code>rtd_send()</code>: 被上层应用调用，将数据交给 rdt 以发送给对方</li>
<li><code>udt_send()</code>: 被 rdt 调用，在不可靠信道上向接收方传输数据</li>
<li><code>rdt_rcv()</code>: 当数据到达接收方信道时被调用</li>
<li><code>deliver_data()</code>: 接收方可靠传输协议向上层应用交付数据</li>
</ul>
<p><strong><code>rdt_send()</code> and <code>deliver_data()</code> 都是单向的，应用层只关收发数据，下方传输层负责数据可靠性。</strong></p>
<p><strong><code>udt_send()</code> and <code>rdt_rcv()</code>都是双向的，在不可靠的数据信道上需要双向的控制信息流动。</strong></p>
<h3 id="可靠数据传输协议"><a href="#可靠数据传输协议" class="headerlink" title="可靠数据传输协议"></a>可靠数据传输协议</h3><ul>
<li>渐进地设计可靠数据传输协议的发送方和接收方</li>
<li>考虑单向数据传输，但控制信息双向流动</li>
<li>利用状态机（Finite State Machine，FSM）刻画传输协议</li>
</ul>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/FSM.png" alt="FSM"></p>
<h3 id="Rdt-1-0-可靠信道上的可靠数据传输"><a href="#Rdt-1-0-可靠信道上的可靠数据传输" class="headerlink" title="Rdt 1.0 可靠信道上的可靠数据传输"></a>Rdt 1.0 可靠信道上的可靠数据传输</h3><ul>
<li>底层信道完全可靠<ul>
<li>不会发送错误（bit error）</li>
<li>不会丢弃分组</li>
</ul>
</li>
<li>发送方和接收方的 FSM 独立</li>
</ul>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt1.0-FSM.png" alt="Rdt1.0-FSM"></p>
<h3 id="Rdt-2-0-产生位错误的信道"><a href="#Rdt-2-0-产生位错误的信道" class="headerlink" title="Rdt 2.0 产生位错误的信道"></a>Rdt 2.0 产生位错误的信道</h3><ol>
<li>底层信道可能翻转分组中的位（bit），利用校验和检测位错误。</li>
<li>如何从错误中恢复？<ol>
<li>确认机制（Acknowledgements，ACK），接收方显式地告知发送方分组已正确接收</li>
<li>NACK，接收方显式地告知发送方分组有错误</li>
<li>发送方收到 NACK 后，重传分组</li>
</ol>
</li>
<li>基于这种重传机制的 rdt 协议称为 ARQ（Automatic Repeat reQuest） 协议</li>
</ol>
<p>Rdt 2.0 中引入的新机制</p>
<ul>
<li>差错检测</li>
<li>接收方反馈控制信息：ACK/NACK</li>
<li>重传</li>
</ul>
<h4 id="Rdt-2-0-FSM"><a href="#Rdt-2-0-FSM" class="headerlink" title="Rdt 2.0 FSM"></a>Rdt 2.0 FSM</h4><p>stop-wait 协议</p>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt2.0-FSM.png" alt="Rdt2.0-FSM"></p>
<h3 id="Rdt-2-1-Rdt-2-2"><a href="#Rdt-2-1-Rdt-2-2" class="headerlink" title="Rdt 2.1 Rdt 2.2"></a>Rdt 2.1 Rdt 2.2</h3><h4 id="Rdt-2-0-的缺陷"><a href="#Rdt-2-0-的缺陷" class="headerlink" title="Rdt 2.0 的缺陷"></a>Rdt 2.0 的缺陷</h4><ol>
<li>如果 ACK/NACK 消息发生错误/被破坏（corrupted）会怎么样？<ol>
<li>为 ACK/NACK 增加校验和，检测并纠错（难度高）</li>
<li>发送方收到被破坏的 ACK/ANCK 时不知道接收方发生了什么，需要添加额外的控制信息（额外的消息仍然会坏掉）</li>
<li>如果 ACK/NACK 坏掉，发送方重传 （好）</li>
<li>不能简单的重传：产生重复分组 （待解决）</li>
</ol>
</li>
<li>如何解决重复分组问题？<ol>
<li>序列号（Sequence number）：发送方给每个分组增加序列号</li>
<li>接收方丢弃重复分组</li>
</ol>
</li>
</ol>
<p>依然使用停等。<br>Stop and wait: sender sends one packet, then wait for receiver response.</p>
<h4 id="Rdt-2-1-发送方-应对-ACK-x2F-NACK-破坏，使用两个序列号"><a href="#Rdt-2-1-发送方-应对-ACK-x2F-NACK-破坏，使用两个序列号" class="headerlink" title="Rdt 2.1 发送方, 应对 ACK/NACK 破坏，使用两个序列号"></a>Rdt 2.1 发送方, 应对 ACK/NACK 破坏，使用两个序列号</h4><p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt2.1-FSM-sender.png" alt="Rdt2.1-FSM-sender"></p>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt2.1-FSM-recv.png" alt="Rdt2.1-FSM-recv"></p>
<h4 id="Rdt-2-1-vs-Rdt-2-0"><a href="#Rdt-2-1-vs-Rdt-2-0" class="headerlink" title="Rdt 2.1 vs Rdt 2.0"></a>Rdt 2.1 vs Rdt 2.0</h4><h5 id="发送方"><a href="#发送方" class="headerlink" title="发送方"></a>发送方</h5><ul>
<li>为每个分组增加了序列号</li>
<li>两个序列号（0，1）就够用，为什么？因为采用的是停等协议</li>
<li>需校验 ACK/NACk 消息是否发送错误</li>
<li>状态数量翻倍<ul>
<li>状态必须记住当前的分组序列号</li>
</ul>
</li>
</ul>
<h5 id="接收方"><a href="#接收方" class="headerlink" title="接收方"></a>接收方</h5><ul>
<li>需判断分组是否是重复<ul>
<li>当前所处状态提供了期望收到分组的序列号</li>
</ul>
</li>
<li>注意：接收方无法知道 ACK/NACK 是否被发送方正确收到</li>
</ul>
<h4 id="Rdt-2-2-无-NACK-的消息协议"><a href="#Rdt-2-2-无-NACK-的消息协议" class="headerlink" title="Rdt 2.2 无 NACK 的消息协议"></a>Rdt 2.2 无 NACK 的消息协议</h4><p>真的需要两种确认消息（ACK + NACK）吗？ Rdt 2.2 与 Rdt 2.1 功能相同，但是只使用 ACK。</p>
<h5 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h5><ul>
<li>接收方通过 ACK 告知最后一个被正确接收的分组</li>
<li>在 ACK 消息中显式的加入被确认分组的序列号</li>
<li>发送方收到重复 ACK 后，采取与收到 NACK 消息相同的动作，重发当前分组</li>
</ul>
<p>比如发送方发送序列号1，但是接收方收到错误的数据，此时接收方发送序列号0的ACK，发送方收到重复ACK就会重发分组</p>
<h3 id="Rtd-3-0"><a href="#Rtd-3-0" class="headerlink" title="Rtd 3.0"></a>Rtd 3.0</h3><p>如果信道既可能发送错误，也可能丢失分组，检验和、序列号、ACK、重传还够用吗？</p>
<p>解决方法：发送方等待”合理”的时间重传。</p>
<ul>
<li>如果没收到 ACK，重传</li>
<li>如果分组或 ACK 只是延迟而不是丢失呢<ul>
<li>重传会产生重复，序列号机制能够处理</li>
<li>接收方需在 ACK 中显式告知所确认的分组</li>
</ul>
</li>
<li>需要定时器</li>
</ul>
<h5 id="Rdt-3-0-FSM"><a href="#Rdt-3-0-FSM" class="headerlink" title="Rdt 3.0 FSM"></a>Rdt 3.0 FSM</h5><p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/Rdt3.0-FSM-sender.png" alt="Rdt3.0-FSM-sender"><br><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/%E5%8F%91%E9%80%81%E6%96%B9seq.png" alt="发送方seq"><br><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/%E5%8F%91%E9%80%81%E6%96%B9seq.png" alt="发送方seq"><br>timeout 太短，早熟。<br><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/%E5%8F%91%E9%80%81%E6%96%B9seq2.png" alt="发送方seq2"></p>
<h5 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h5><p>Rdt 3.0 能够正确工作，但性能很差，是因为停等协议。</p>
<h5 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h5><p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/demo.png" alt="demo"><br><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/stop-wait.png" alt="stop-wait"></p>
<h2 id="流水线机制与滑动窗口协议"><a href="#流水线机制与滑动窗口协议" class="headerlink" title="流水线机制与滑动窗口协议"></a>流水线机制与滑动窗口协议</h2><h3 id="流水线机制：提高资源利用率"><a href="#流水线机制：提高资源利用率" class="headerlink" title="流水线机制：提高资源利用率"></a>流水线机制：提高资源利用率</h3><p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/pipeline.png" alt="pipeline"></p>
<h3 id="流水线协议"><a href="#流水线协议" class="headerlink" title="流水线协议"></a>流水线协议</h3><p>允许发送方收到 ACK 之前连续发送多个分组，就需要更大的序列号范围，发送方和接收方需要更大的存储空间来缓存分组。</p>
<h3 id="滑动窗口协议"><a href="#滑动窗口协议" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h3><ul>
<li>滑动窗口协议：Sliding window protocol</li>
<li>窗口<ul>
<li>允许使用的序列号范围</li>
<li>窗口尺寸为 N：最多有 N 个等待确认的消息</li>
</ul>
</li>
<li>滑动窗口<ul>
<li>随着协议的运行，窗口在序列号空间内向前滑动</li>
</ul>
</li>
<li>GBN、SR<br><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/window.png" alt="windown"></li>
</ul>
<h3 id="Go-Back-N-协议"><a href="#Go-Back-N-协议" class="headerlink" title="Go-Back-N 协议"></a>Go-Back-N 协议</h3><p>后退 N 帧协议</p>
<h4 id="发送方-1"><a href="#发送方-1" class="headerlink" title="发送方"></a>发送方</h4><ul>
<li>分组头部包含 k-bit 的序列号，2的 k 次方的序列号</li>
<li>窗口尺寸为N，最多允许 N 个分组未确认<br><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN.png" alt="GBN"></li>
<li>ACK(n): 确认到序列号n（包含n）的分组均已被正确接收。<ul>
<li>可能收到重复 ACK</li>
</ul>
</li>
<li>为空中的分组设置计时器（timer）</li>
<li>超时 Timeout（n）事件：重传序列号大于等于n，还未收到 ACK 的所有分组</li>
</ul>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN-FSM.png" alt="GBN-FSM"></p>
<h4 id="接收方-1"><a href="#接收方-1" class="headerlink" title="接收方"></a>接收方</h4><p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN-FSM-recv.png" alt="GBN-FSM-recv"></p>
<ul>
<li>ACK 机制：发送拥有最高序列号的、已被正确接收的分组的 ACK<ul>
<li>可能产生重复 ACK</li>
<li>只需要记住唯一的 expectedseqnum</li>
</ul>
</li>
<li>乱序到达的分组<ul>
<li>直接丢弃，因为接收方没有缓存 （go back n）</li>
<li>重新确认序列号最大的、按序到达的分组</li>
</ul>
</li>
</ul>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/GBN-seq.png" alt="GBN-seq"></p>
<p>接收方没有窗口，没有缓存，效率差。</p>
<h4 id="demo-1"><a href="#demo-1" class="headerlink" title="demo"></a>demo</h4><p>数据链路层采用 GBN 协议，发送方已经发送了编号为 0-7 的帧，当计时器超时时，若发送方只收到0、2、3号帧的确认，则发送方需要重发的帧数是多少，分别<br>是哪几个帧？</p>
<p>根据 GBN 协议工作原理，GBN 协议的确认是累计确认，所以此时发送端需要重发的帧数是4个，一次分别是4、5、6、7帧。</p>
<h3 id="Selective-Repeat-协议"><a href="#Selective-Repeat-协议" class="headerlink" title="Selective Repeat 协议"></a>Selective Repeat 协议</h3><ul>
<li>接收方对每个分组单独进行确认<ul>
<li>设置缓存机制，缓存乱序到达的分组</li>
</ul>
</li>
<li>发送方只重传那些没收到 ACK 的分组<ul>
<li>为每个分组设置定时器</li>
</ul>
</li>
<li>发送方窗口<ul>
<li>N 个连续的序列号</li>
<li>限制已发送且未确认的分组</li>
</ul>
</li>
</ul>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/sr-window.png" alt="sr-window"></p>
<p><img src="/blog/2024/03/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8201/SR.png" alt="SR"></p>
<h4 id="SR-协议困境"><a href="#SR-协议困境" class="headerlink" title="SR 协议困境"></a>SR 协议困境</h4><p>序列号空间大小与窗口尺寸需满足的关系？</p>
<p>发送方的窗口 + 接收方的窗口大小 &lt;= 2的 k 次方（序列号位数）</p>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/blog/tags/%E7%BD%91%E7%BB%9C/" rel="tag"><i class="fa fa-tag"></i> 网络</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/2024/03/23/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E5%B1%8202/" rel="prev" title="计算机网络应用层02">
      <i class="fa fa-chevron-left"></i> 计算机网络应用层02
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/2024/04/06/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BC%A0%E8%BE%93%E5%B1%8202/" rel="next" title="计算机网络传输层02">
      计算机网络传输层02 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1%E5%92%8C%E5%8D%8F%E8%AE%AE"><span class="nav-number">1.</span> <span class="nav-text">传输层服务和协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82-vs-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="nav-number">2.</span> <span class="nav-text">传输层 vs 网络层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Internet%E6%8F%90%E4%BE%9B%E7%9A%84%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="nav-number">3.</span> <span class="nav-text">Internet提供的传输层协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TCP"><span class="nav-number">3.1.</span> <span class="nav-text">TCP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP"><span class="nav-number">3.2.</span> <span class="nav-text">UDP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E5%92%8C%E5%A4%9A%E8%B7%AF%E5%88%86%E7%94%A8"><span class="nav-number">4.</span> <span class="nav-text">多路复用和多路分用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E6%96%B9%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="nav-number">4.1.</span> <span class="nav-text">发送方多路复用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6%E6%96%B9%E5%A4%9A%E8%B7%AF%E5%88%86%E7%94%A8"><span class="nav-number">4.2.</span> <span class="nav-text">接收方多路分用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%94%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">4.3.</span> <span class="nav-text">分用的工作原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%88%86%E7%94%A8-UDP"><span class="nav-number">4.3.1.</span> <span class="nav-text">无连接的分用 UDP</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E5%88%86%E7%94%A8-TCP"><span class="nav-number">4.3.2.</span> <span class="nav-text">面向连接的分用 TCP</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UDP-1"><span class="nav-number">5.</span> <span class="nav-text">UDP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E4%BA%8E-IP-%E5%8D%8F%E8%AE%AE%EF%BC%8C%E5%81%9A%E4%BA%86%E7%AE%80%E5%8D%95%E7%9A%84%E6%89%A9%E5%B1%95"><span class="nav-number">5.1.</span> <span class="nav-text">基于 IP 协议，做了简单的扩展</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5"><span class="nav-number">5.2.</span> <span class="nav-text">无连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP-%E5%AD%98%E5%9C%A8%E7%9A%84%E4%BB%B7%E5%80%BC"><span class="nav-number">5.3.</span> <span class="nav-text">UDP 存在的价值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP%E7%94%A8%E9%80%94"><span class="nav-number">5.4.</span> <span class="nav-text">UDP用途</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP-%E6%A0%A1%E9%AA%8C%E5%92%8C-checksum"><span class="nav-number">5.5.</span> <span class="nav-text">UDP 校验和 checksum</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8E%9F%E7%90%86"><span class="nav-number">5.6.</span> <span class="nav-text">可靠数据传输原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84%EF%BC%9A%E6%8E%A5%E5%8F%A3"><span class="nav-number">5.7.</span> <span class="nav-text">可靠数据传输协议基本结构：接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.8.</span> <span class="nav-text">可靠数据传输协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt-1-0-%E5%8F%AF%E9%9D%A0%E4%BF%A1%E9%81%93%E4%B8%8A%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="nav-number">5.9.</span> <span class="nav-text">Rdt 1.0 可靠信道上的可靠数据传输</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt-2-0-%E4%BA%A7%E7%94%9F%E4%BD%8D%E9%94%99%E8%AF%AF%E7%9A%84%E4%BF%A1%E9%81%93"><span class="nav-number">5.10.</span> <span class="nav-text">Rdt 2.0 产生位错误的信道</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt-2-0-FSM"><span class="nav-number">5.10.1.</span> <span class="nav-text">Rdt 2.0 FSM</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rdt-2-1-Rdt-2-2"><span class="nav-number">5.11.</span> <span class="nav-text">Rdt 2.1 Rdt 2.2</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt-2-0-%E7%9A%84%E7%BC%BA%E9%99%B7"><span class="nav-number">5.11.1.</span> <span class="nav-text">Rdt 2.0 的缺陷</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt-2-1-%E5%8F%91%E9%80%81%E6%96%B9-%E5%BA%94%E5%AF%B9-ACK-x2F-NACK-%E7%A0%B4%E5%9D%8F%EF%BC%8C%E4%BD%BF%E7%94%A8%E4%B8%A4%E4%B8%AA%E5%BA%8F%E5%88%97%E5%8F%B7"><span class="nav-number">5.11.2.</span> <span class="nav-text">Rdt 2.1 发送方, 应对 ACK&#x2F;NACK 破坏，使用两个序列号</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt-2-1-vs-Rdt-2-0"><span class="nav-number">5.11.3.</span> <span class="nav-text">Rdt 2.1 vs Rdt 2.0</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E6%96%B9"><span class="nav-number">5.11.3.1.</span> <span class="nav-text">发送方</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6%E6%96%B9"><span class="nav-number">5.11.3.2.</span> <span class="nav-text">接收方</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rdt-2-2-%E6%97%A0-NACK-%E7%9A%84%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.11.4.</span> <span class="nav-text">Rdt 2.2 无 NACK 的消息协议</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="nav-number">5.11.4.1.</span> <span class="nav-text">实现方式</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rtd-3-0"><span class="nav-number">5.12.</span> <span class="nav-text">Rtd 3.0</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Rdt-3-0-FSM"><span class="nav-number">5.12.0.1.</span> <span class="nav-text">Rdt 3.0 FSM</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="nav-number">5.12.0.2.</span> <span class="nav-text">性能分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#demo"><span class="nav-number">5.12.0.3.</span> <span class="nav-text">demo</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%9C%BA%E5%88%B6%E4%B8%8E%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.</span> <span class="nav-text">流水线机制与滑动窗口协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%9C%BA%E5%88%B6%EF%BC%9A%E6%8F%90%E9%AB%98%E8%B5%84%E6%BA%90%E5%88%A9%E7%94%A8%E7%8E%87"><span class="nav-number">6.1.</span> <span class="nav-text">流水线机制：提高资源利用率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.2.</span> <span class="nav-text">流水线协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.3.</span> <span class="nav-text">滑动窗口协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Go-Back-N-%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.4.</span> <span class="nav-text">Go-Back-N 协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E6%96%B9-1"><span class="nav-number">6.4.1.</span> <span class="nav-text">发送方</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6%E6%96%B9-1"><span class="nav-number">6.4.2.</span> <span class="nav-text">接收方</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#demo-1"><span class="nav-number">6.4.3.</span> <span class="nav-text">demo</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Selective-Repeat-%E5%8D%8F%E8%AE%AE"><span class="nav-number">6.5.</span> <span class="nav-text">Selective Repeat 协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SR-%E5%8D%8F%E8%AE%AE%E5%9B%B0%E5%A2%83"><span class="nav-number">6.5.1.</span> <span class="nav-text">SR 协议困境</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="朱佳东"
      src="/blog/images/avatar.png">
  <p class="site-author-name" itemprop="name">朱佳东</p>
  <div class="site-description" itemprop="description">melon</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">58</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/blog/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zjd-melo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zjd-melo" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:826695779@qq.com" title="E-Mail → mailto:826695779@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2017 – 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">朱佳东</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">Symbols count total: </span>
    <span title="Symbols count total">182k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    <span title="Reading time total">2:45</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  















  

  

</body>
</html>
